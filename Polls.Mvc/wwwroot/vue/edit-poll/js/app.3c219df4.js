(function(e){function t(t){for(var i,u,l=t[0],c=t[1],a=t[2],p=0,d=[];p<l.length;p++)u=l[p],o[u]&&d.push(o[u][0]),o[u]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(e[i]=c[i]);r&&r(t);while(d.length)d.shift()();return s.push.apply(s,a||[]),n()}function n(){for(var e,t=0;t<s.length;t++){for(var n=s[t],i=!0,l=1;l<n.length;l++){var c=n[l];0!==o[c]&&(i=!1)}i&&(s.splice(t--,1),e=u(u.s=n[0]))}return e}var i={},o={app:0},s=[];function u(t){if(i[t])return i[t].exports;var n=i[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,u),n.l=!0,n.exports}u.m=e,u.c=i,u.d=function(e,t,n){u.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},u.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},u.t=function(e,t){if(1&t&&(e=u(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(u.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)u.d(n,i,function(t){return e[t]}.bind(null,i));return n},u.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return u.d(t,"a",t),t},u.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},u.p="/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],c=l.push.bind(l);l.push=t,l=l.slice();for(var a=0;a<l.length;a++)t(l[a]);var r=c;s.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"034f":function(e,t,n){"use strict";var i=n("64a9"),o=n.n(i);o.a},"56d7":function(e,t,n){"use strict";n.r(t);n("cadf"),n("551c"),n("f751"),n("097d");var i=n("2b0e"),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("poll")],1)},s=[],u=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"form"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.poll.title,expression:"poll.title"}],staticClass:"title-input",attrs:{type:"text"},domProps:{value:e.poll.title},on:{blur:e.validateTitle,input:function(t){t.target.composing||e.$set(e.poll,"title",t.target.value)}}}),n("br"),n("input",{directives:[{name:"model",rawName:"v-model",value:e.poll.description,expression:"poll.description"}],staticClass:"description-input",attrs:{type:"text",placeholder:"Opis formualrza"},domProps:{value:e.poll.description},on:{input:function(t){t.target.composing||e.$set(e.poll,"description",t.target.value)}}}),e._l(e.allQuestions,function(t,i){return n("div",{key:i,staticClass:"question"},["SingleChoice"==t.questionType?n("single-choice-question",{attrs:{question:t},on:{questionTextLostFocus:e.validateQuestioinText,choiceLostFocus:e.validateChoice,deleteQuestion:e.deleteQuestion,deleteChoice:e.deleteChoice,addChoice:e.addChoice}}):e._e(),"MultipleChoice"==t.questionType?n("multiple-choice-question",{attrs:{question:t},on:{questionTextLostFocus:e.validateQuestioinText,choiceLostFocus:e.validateChoice,deleteQuestion:e.deleteQuestion,deleteChoice:e.deleteChoice,addChoice:e.addChoice}}):e._e(),"TextAnswer"==t.questionType?n("text-answer-question",{attrs:{question:t},on:{questionTextLostFocus:e.validateQuestioinText,deleteQuestion:e.deleteQuestion}}):e._e()],1)}),n("div",{staticClass:"buttons"},[e._v("\n        Dodaj pytanie: \n        "),n("a",{staticClass:"btn",on:{click:e.addSingleChoiceQuestion}},[e._v("jednokrotny wybór")]),e._v(" | \n        "),n("a",{staticClass:"btn",on:{click:e.addMultipleChoiceQuestion}},[e._v("wielokrotny wybór")]),e._v(" |\n        "),n("a",{staticClass:"btn",on:{click:e.addTextAnswerQuestion}},[e._v("odpowiedz tekstowa")])]),n("div",[n("a",{staticClass:"btn",on:{click:e.save}},[e._v("Zapisz")])])],2)},l=[],c=(n("ac6a"),n("20d6"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("a",{staticClass:"x-btn delete-question-btn",on:{click:function(t){return e.$emit("deleteQuestion",e.question)}}},[e._v("×")]),n("div",{staticClass:"question-text"},[n("label",[n("input",{directives:[{name:"model",rawName:"v-model",value:e.question.questionText,expression:"question.questionText"}],staticClass:"question-text-input",domProps:{value:e.question.questionText},on:{blur:function(t){return e.$emit("questionTextLostFocus",e.question)},input:function(t){t.target.composing||e.$set(e.question,"questionText",t.target.value)}}})])]),n("div",{staticClass:"choices"},e._l(e.question.choices,function(t,i){return n("div",{key:i,staticClass:"choice"},[n("input",{attrs:{type:"radio",disabled:""}}),n("input",{directives:[{name:"model",rawName:"v-model",value:e.question.choices[i],expression:"question.choices[index]"}],domProps:{value:e.question.choices[i]},on:{blur:function(t){return e.$emit("choiceLostFocus",e.question,i)},input:function(t){t.target.composing||e.$set(e.question.choices,i,t.target.value)}}}),n("a",{staticClass:"x-btn",on:{click:function(t){return e.$emit("deleteChoice",e.question,i)}}},[e._v("×")]),n("br")])}),0),n("a",{staticClass:"add-choice-btn btn",on:{click:function(t){return e.$emit("addChoice",e.question)}}},[e._v("Dodaj opcję")])])}),a=[],r={name:"SingleChoiceQuestion",props:{question:Object},components:{}},p=r,d=n("2877"),h=Object(d["a"])(p,c,a,!1,null,null,null),f=h.exports,v=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("a",{staticClass:"x-btn delete-question-btn",on:{click:function(t){return e.$emit("deleteQuestion",e.question)}}},[e._v("×")]),n("div",{staticClass:"question-text"},[n("label",[n("input",{directives:[{name:"model",rawName:"v-model",value:e.question.questionText,expression:"question.questionText"}],staticClass:"question-text-input",domProps:{value:e.question.questionText},on:{blur:function(t){return e.$emit("questionTextLostFocus",e.question)},input:function(t){t.target.composing||e.$set(e.question,"questionText",t.target.value)}}})])]),n("div",{staticClass:"choices"},e._l(e.question.choices,function(t,i){return n("div",{key:i,staticClass:"choice"},[n("input",{attrs:{type:"checkbox",disabled:""}}),n("input",{directives:[{name:"model",rawName:"v-model",value:e.question.choices[i],expression:"question.choices[index]"}],domProps:{value:e.question.choices[i]},on:{blur:function(t){return e.$emit("choiceLostFocus",e.question,i)},input:function(t){t.target.composing||e.$set(e.question.choices,i,t.target.value)}}}),n("a",{staticClass:"x-btn",on:{click:function(t){return e.$emit("deleteChoice",e.question,i)}}},[e._v("×")]),n("br")])}),0),n("a",{staticClass:"add-choice-btn btn",on:{click:function(t){return e.$emit("addChoice",e.question)}}},[e._v("Dodaj opcję")])])},q=[],m={name:"MultipleChoiceQuestion",props:{question:Object},components:{}},x=m,T=Object(d["a"])(x,v,q,!1,null,null,null),b=T.exports,C=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("a",{staticClass:"x-btn delete-question-btn",on:{click:function(t){return e.$emit("deleteQuestion",e.question)}}},[e._v("×")]),n("div",{staticClass:"question-text"},[n("label",[n("input",{directives:[{name:"model",rawName:"v-model",value:e.question.questionText,expression:"question.questionText"}],staticClass:"question-text-input",domProps:{value:e.question.questionText},on:{blur:function(t){return e.$emit("questionTextLostFocus",e.question)},input:function(t){t.target.composing||e.$set(e.question,"questionText",t.target.value)}}})])]),n("textarea",{attrs:{name:"",id:"",cols:"35",rows:"5",disabled:""}})])},w=[],Q={name:"TextAnswerQuestion",props:{question:Object},components:{}},y=Q,g=Object(d["a"])(y,C,w,!1,null,null,null),_=g.exports,j=n("bc3a"),O=n.n(j),$={name:"Poll",components:{SingleChoiceQuestion:f,MultipleChoiceQuestion:b,TextAnswerQuestion:_},data:function(){return{poll:{pollId:0,title:"",description:"",questions:[]},questionsToDelete:[],newQuestions:[]}},mounted:function(){var e=this,t=new URL(window.location.href),n=t.searchParams,i=parseInt(n.get("id"));O()({method:"get",url:"https://localhost:44392/polls/edit/poll/".concat(i)}).then(function(t){e.poll.pollId=t.data.pollId,e.poll.title=t.data.title,e.poll.description=t.data.description,e.poll.questions=t.data.questions})},computed:{allQuestions:function(){return this.poll.questions.concat(this.newQuestions)}},methods:{validateQuestioinText:function(e){e.questionText||(e.questionText="Treść pytania")},validateTitle:function(){this.poll.title||(this.poll.title="Formularz bez tytułu")},validateChoice:function(e,t){if(!e.choices[t]){var n=t+1,i="Opcja "+n;e.choices.splice(t,1,i)}},deleteQuestion:function(e){var t=this.newQuestions.findIndex(function(t){return t==e});if(-1==t){var n=this.poll.questions.indexOf(e);this.questionsToDelete.push(e),this.poll.questions.splice(n,1)}else this.newQuestions.splice(t,1)},deleteChoice:function(e,t){e.choices.splice(t,1)},addChoice:function(e){var t=e.choices.length+1;e.choices.push("Opcja "+t)},addSingleChoiceQuestion:function(){this.newQuestions.push({questionText:"Tresc pytania",questionType:"SingleChoice",choices:["Opcja 1","Opcja 2","Opcja 3"],number:0})},addMultipleChoiceQuestion:function(){this.newQuestions.push({questionText:"Tresc pytania",questionType:"MultipleChoice",choices:["Opcja 1","Opcja 2","Opcja 3"],number:0})},addTextAnswerQuestion:function(){this.newQuestions.push({questionText:"Tresc pytania",questionType:"TextAnswer",number:0})},giveQuestionANumber:function(){var e=1;this.allQuestions.forEach(function(t){t.number=e,e+=1})},save:function(){this.giveQuestionANumber();var e={pollId:this.poll.pollId,newTitle:this.poll.title,newDescription:this.poll.description,scQuestionsToUpdate:this.poll.questions.filter(function(e){return"SingleChoice"==e.questionType}),mcQuestionsToUpdate:this.poll.questions.filter(function(e){return"MultipleChoice"==e.questionType}),taQuestionsToUpdate:this.poll.questions.filter(function(e){return"TextAnswer"==e.questionType}),newScQuestions:this.newQuestions.filter(function(e){return"SingleChoice"==e.questionType}),newMcQuestions:this.newQuestions.filter(function(e){return"MultipleChoice"==e.questionType}),newTaQuestions:this.newQuestions.filter(function(e){return"TextAnswer"==e.questionType}),scQuestionsToDelete:this.questionsToDelete.filter(function(e){return"SingleChoice"==e.questionType}),mcQuestionsToDelete:this.questionsToDelete.filter(function(e){return"MultipleChoice"==e.questionType}),taQuestionsToDelete:this.questionsToDelete.filter(function(e){return"TextAnswer"==e.questionType})};O()({method:"post",url:"https://localhost:44392/polls/edit",data:e}).then(function(e){200==e.status&&(window.location.href="https://localhost:44392/")}).catch(function(){alert("Coś poszło nie tak przy zapisywaniu formularza, spróbuj ponownie póżniej")})}}},k=$,P=Object(d["a"])(k,u,l,!1,null,null,null),S=P.exports,M={name:"app",components:{Poll:S}},D=M,A=(n("034f"),Object(d["a"])(D,o,s,!1,null,null,null)),F=A.exports;i["a"].config.productionTip=!1,new i["a"]({render:function(e){return e(F)}}).$mount("#app")},"64a9":function(e,t,n){}});
//# sourceMappingURL=app.3c219df4.js.map